!function(e,t){if("function"==typeof define&&define.amd)define(["exports","jquery","px/util"],t);else if("undefined"!=typeof exports)t(exports,require("jquery"),require("px/util"));else{var i={exports:{}};t(i.exports,e.jquery,e.util),e.pxWizard=i.exports}}(this,function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=n(t),o=n(i),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(){function e(e,t){var i=[],n=!0,s=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done)&&(i.push(o.value),!t||i.length!==t);n=!0);}catch(e){s=!0,r=e}finally{try{!n&&a.return&&a.return()}finally{if(s)throw r}}return i}return function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),f=function(e){var t="pxWizard",i="px.wizard",n="."+i,r=e.fn[t],f={minStepWidth:200},l={WRAPPER:"wizard-wrapper",STEPS:"wizard-steps",PANE:"wizard-pane",FROZEN:"frozen",FINISHED:"finished",ACTIVE:"active",COMPLETED:"completed"},d={RESIZE:"resize"+n,CLICK:"click"+n,CHANGE:"stepchange"+n,CHANGED:"stepchanged"+n,FINISH:"finish"+n,FINISHED:"finished"+n,FROZEN:"frozen"+n,UNFROZEN:"unfrozen"+n,RESETED:"reseted"+n,DESTROY:"destroy"+n},v=function(){function r(t,i){s(this,r),this.uniqueId=o.default.generateUniqueId(),this.element=t,this.steps=e(t).find("."+l.STEPS)[0],this.stepItems=e(this.steps).find("li"),this.wrapper=e(t).find("."+l.WRAPPER)[0],this.config=this._getConfig(i),this.activeStep=null,this._isRtl="rtl"===e("html").attr("dir"),this._resetStepsWidth(),this.resizeStepItems(),this.goTo(this.getActiveStepIndex()),this._setListeners()}return h(r,[{key:"resizeStepItems",value:function(){for(var t=this.stepItems.length,i=e(this.wrapper).width(),n=this.config.minStepWidth*t,s=i>n?Math.floor(i/t):this.config.minStepWidth,r=0;r<t;r++)this._setStrictWidth(this.stepItems[r],s);null!==this.activeStep&&this._placeStepsContainer()}},{key:"getActiveStepIndex",value:function(){var t=this.activeStep||e(this.steps).find("li."+l.ACTIVE)[0];return t?this._getStepIndex(t):0}},{key:"getStepCount",value:function(){return this.stepItems.length}},{key:"goTo",value:function(e){if(!this.isFrozen()&&!this.isFinished()){var t=void 0,i=void 0,n=void 0,s=this._getStepItemAndTarget(e),r=u(s,3);i=r[0],t=r[1],n=r[2];var o=this.activeStep?this._getStepIndex(this.activeStep):null;if(null===o||i!==o){if(null!==o){var a=this._triggerPreventableEvent("CHANGE",this.element,{activeStepIndex:o,nextStepIndex:i});if(!a)return}this.activeStep=t,this._activateStepItem(t,i),this._activateStepPane(n),null!==o&&this._triggerEvent("CHANGED",this.element,{prevStepIndex:o,activeStepIndex:i})}}}},{key:"getPaneByIndex",value:function(t){var i=void 0,n=void 0,s=void 0,r=this._getStepItemAndTarget(t),o=u(r,3);return n=o[0],i=o[1],s=o[2],e(s)}},{key:"getActivePane",value:function(){return this.getPaneByIndex(this.getActiveStepIndex())}},{key:"goNext",value:function(){if(!this.isFrozen()&&!this.isFinished()){var e=this._getStepIndex(this.activeStep)+1;return e>=this.stepItems.length?this.finish():void this.goTo(e)}}},{key:"goPrev",value:function(){if(!this.isFrozen()&&!this.isFinished()){var e=this._getStepIndex(this.activeStep)-1;e<0||this.goTo(e)}}},{key:"finish",value:function(){if(!this.isFrozen()&&!this.isFinished()&&this._triggerPreventableEvent("FINISH",this.element)){var e=this._getStepIndex(this.activeStep),t=this.stepItems.length-1;e!==t&&this.goTo(t),o.default.addClass(this.element,l.FINISHED),this.freeze(),this._triggerEvent("FINISHED",this.element)}}},{key:"isFinished",value:function(){return o.default.hasClass(this.element,l.FINISHED)}},{key:"freeze",value:function(){o.default.addClass(this.element,l.FROZEN),this._triggerEvent("FROZEN",this.element)}},{key:"unfreeze",value:function(){this.isFinished()||(o.default.removeClass(this.element,l.FROZEN),this._triggerEvent("UNFROZEN",this.element))}},{key:"isFrozen",value:function(){return o.default.hasClass(this.element,l.FROZEN)}},{key:"reset",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];o.default.removeClass(this.element,l.FROZEN),o.default.removeClass(this.element,l.FINISHED),e&&this.goTo(0),this._triggerEvent("RESETED",this.element)}},{key:"destroy",value:function(){this._triggerPreventableEvent("DESTROY",this.element)&&(this._unsetListeners(),e(this.element).removeData(i))}},{key:"_resetStepsWidth",value:function(){this.steps.style.width="auto"}},{key:"_setStrictWidth",value:function(e,t){e.style.minWidth=t+"px",e.style.maxWidth=t+"px",e.style.width=t+"px"}},{key:"_getStepItemAndTarget",value:function(e){var t=void 0,i=void 0;if("number"==typeof e){if(t=this.stepItems[e],i=e,!t)throw new Error('Step item with index "'+e+'" is not found.')}else t=e[0]||e,i=this._getStepIndex(t);var n=t.getAttribute("data-target");if(!n)throw new Error('The step item has invalid "data-target" attribute.');return[i,t,n]}},{key:"_activateStepItem",value:function(e,t){o.default.addClass(e,l.ACTIVE),o.default.removeClass(e,l.COMPLETED);for(var i=0;i<t;i++)o.default.addClass(this.stepItems[i],l.COMPLETED),o.default.removeClass(this.stepItems[i],l.ACTIVE);for(var n=t+1,s=this.stepItems.length;n<s;n++)o.default.removeClass(this.stepItems[n],l.ACTIVE),o.default.removeClass(this.stepItems[n],l.COMPLETED);this._placeStepsContainer()}},{key:"_activateStepPane",value:function(t){for(var i=e(this.element).find("."+l.PANE+"."+l.ACTIVE),n=0,s=i.length;n<s;n++)o.default.removeClass(i[n],l.ACTIVE);o.default.addClass(e(this.element).find(t)[0],l.ACTIVE)}},{key:"_placeStepsContainer",value:function(){var t=e(this.wrapper).width(),i=e(this.steps).width(),n=e(this.activeStep).outerWidth(),s=Math.floor((t-n)/2),r=e(this.activeStep).position().left,o=void 0;this._isRtl&&(r=i-r-n),i>t&&r>s?(o=-1*r+s,i+o<t&&(o=-1*i+t)):o=0,this.steps.style[this._isRtl?"right":"left"]=o+"px"}},{key:"_getStepIndex",value:function(e){for(var t=void 0,i=0,n=this.stepItems.length;i<n;i++)if(e===this.stepItems[i]){t=i;break}if("undefined"==typeof t)throw new Error("Cannot find step item index.");return t}},{key:"_setListeners",value:function(){var t=this;e(window).on(this.constructor.Event.RESIZE+"."+this.uniqueId,e.proxy(this.resizeStepItems,this)),e(this.steps).on(this.constructor.Event.CLICK,"> li",function(){o.default.hasClass(this,l.COMPLETED)&&t.goTo(this)}),e(this.element).on(this.constructor.Event.CLICK,"[data-wizard-action]",function(){var e=this.getAttribute("data-wizard-action");if("next"===e)return t.goNext();if("prev"===e)return t.goPrev();if("finish"===e)return t.finish();throw new Error('Action "'+e+'" is not found.')})}},{key:"_unsetListeners",value:function(){e(window).off(this.constructor.Event.RESIZE+"."+this.uniqueId),e(this.element).off(n),e(this.steps).off(n)}},{key:"_triggerEvent",value:function(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e(this.element).trigger(e.Event(this.constructor.Event[t],{target:i}),[n])}},{key:"_triggerPreventableEvent",value:function(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=e.Event(this.constructor.Event[t],{target:i});return e(this.element).trigger(s,[n]),!s.isDefaultPrevented()}},{key:"_getConfig",value:function(t){return e.extend({},this.constructor.Default,e(this.element).data(),t)}}],[{key:"_jQueryInterface",value:function(t){for(var n=arguments.length,s=Array(n>1?n-1:0),o=1;o<n;o++)s[o-1]=arguments[o];var u=void 0,h=this.each(function(){var n=e(this).data(i),o="object"===("undefined"==typeof t?"undefined":a(t))?t:null;if(n||(n=new r(this,o),e(this).data(i,n)),"string"==typeof t){if(!n[t])throw new Error('No method named "'+t+'".');u=n[t].apply(n,s)}});return"undefined"!=typeof u?u:h}},{key:"Default",get:function(){return f}},{key:"NAME",get:function(){return t}},{key:"DATA_KEY",get:function(){return i}},{key:"Event",get:function(){return d}},{key:"EVENT_KEY",get:function(){return n}}]),r}();return e.fn[t]=v._jQueryInterface,e.fn[t].Constructor=v,e.fn[t].noConflict=function(){return e.fn[t]=r,v._jQueryInterface},v}(r.default);e.default=f});