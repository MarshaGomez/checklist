!function(e,t){if("function"==typeof define&&define.amd)define(["exports","jquery","px/util"],t);else if("undefined"!=typeof exports)t(exports,require("jquery"),require("px/util"));else{var n={exports:{}};t(n.exports,e.jquery,e.util),e.pxResponsiveBg=n.exports}}(this,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=i(t),a=i(n),s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),f=function(e){var t="pxResponsiveBg",n="px.responsiveBg",i="."+n,r=e.fn[t],f={backgroundImage:null,overlay:!1,overlayOpacity:.2},c={CONTAINER:"px-responsive-bg-container",IMAGE:"px-responsive-bg",OVERLAY:"px-responsive-bg-overlay"},l={RESIZE:"resize"+i},d=function(){function r(e,t){var n=this;o(this,r),this.uniqueId=a.default.generateUniqueId(),this.element=e,this.config=this._getConfig(t),this._loadImage(this.config.backgroundImage,function(e){n._sizeRatio=e.height/e.width,n._setupMarkup(e),n._setListeners(),n.update()})}return u(r,[{key:"update",value:function(){var t=this.image.parentNode,n=e(t).height(),i=e(t).width(),o=void 0,r=void 0,a=void 0,s=void 0;i*this._sizeRatio>n?(r="100%",o=Math.ceil(i*this._sizeRatio),a=Math.floor(-1*(o-n)/2),s=0):(r=Math.ceil(n/this._sizeRatio),o=n,a=0,s=Math.floor(-1*(r-i)/2)),this.image.style.width="100%"===r?r:r+"px",this.image.style.height=o+"px",this.image.style.top=a+"px",this.image.style.left=s+"px"}},{key:"destroy",value:function(t){this._unsetListeners(),t&&e(this.element).removeClass(c.CONTAINER).find("> ."+c.IMAGE).remove(),e(this.element).removeData(n)}},{key:"_loadImage",value:function(e,t){var n=new Image;n.onload=function(){return t(n)},n.src=e}},{key:"_setupMarkup",value:function(t){a.default.addClass(this.element,c.CONTAINER);var n=e(this.element).find("> ."+c.IMAGE);if(n.length||(n=e('<div class="'+c.IMAGE+'"></div>').appendTo(this.element),n.append('<img alt="">')),this.image=n.find("> img")[0],!this.image)throw new Error("Background <img> element not found!");e(this.image).attr("src",t.src),this.config.overlay!==!1?(n.find("."+c.OVERLAY).remove(),n.prepend(e('<div class="'+c.OVERLAY+'"></div>').css({background:"boolean"==typeof this.config.overlay?"#000":this.config.overlay,opacity:this.config.overlayOpacity}))):n.find("> ."+c.OVERLAY).remove()}},{key:"_setListeners",value:function(){e(window).on(this.constructor.Event.RESIZE+"."+this.uniqueId,e.proxy(this.update,this))}},{key:"_unsetListeners",value:function(){e(window).off(this.constructor.Event.RESIZE+"."+this.uniqueId)}},{key:"_getConfig",value:function(t){var n=e.extend({},this.constructor.Default,e(this.element).data(),t);if(!n.backgroundImage)throw new Error("Background image is not specified.");return n}}],[{key:"_jQueryInterface",value:function(t){for(var i=arguments.length,o=Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];return this.each(function(){var i=e(this).data(n),a="object"===("undefined"==typeof t?"undefined":s(t))?t:null;if(i||(i=new r(this,a),e(this).data(n,i)),"string"==typeof t){var u;if(!i[t])throw new Error('No method named "'+t+'"');(u=i)[t].apply(u,o)}})}},{key:"Default",get:function(){return f}},{key:"NAME",get:function(){return t}},{key:"DATA_KEY",get:function(){return n}},{key:"Event",get:function(){return l}},{key:"EVENT_KEY",get:function(){return i}}]),r}();return e.fn[t]=d._jQueryInterface,e.fn[t].Constructor=d,e.fn[t].noConflict=function(){return e.fn[t]=r,d._jQueryInterface},d}(r.default);e.default=f});